<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Assessment Design Tool</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
    <svg class="top-wave" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 180">
        <path fill="#64b5f6" fill-opacity="0.5" d="M0,128L48,117.3C96,107,192,85,288,90.7C384,96,480,128,576,154.7C672,181,768,203,864,186.7C960,171,1056,117,1152,96C1248,75,1344,85,1392,90.7L1440,96L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"></path>
    </svg>
    
    <div class="container">
        <header class="app-header">
            <div class="school-title">
                <div class="school-cn">Shenzhen Mingwan School</div>
                <div class="school-en">SHENZHEN MINGWAN SCHOOL</div>
            </div>
            <h1 class="page-title">Performance Assessment Task Plan</h1>
        </header>

        <div class="app-intro">
            This tool helps teachers design high-quality performance assessment tasks, clarifying learning objectives, scoring criteria, and evidence collection methods.
            After completing all steps, you can download the complete assessment plan document.
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-step step-active">
                    <div class="step-icon">1</div>
                    <div class="step-label">Basic Info</div>
                </div>
                <div class="progress-step">
                    <div class="step-icon">2</div>
                    <div class="step-label">Learning Goals</div>
                </div>
                <div class="progress-step">
                    <div class="step-icon">3</div>
                    <div class="step-label">Assessment Design</div>
                </div>
                <div class="progress-step">
                    <div class="step-icon">4</div>
                    <div class="step-label">Competency Indicators</div>
                </div>
                <div class="progress-step">
                    <div class="step-icon">5</div>
                    <div class="step-label">Complete</div>
                </div>
            </div>
        </div>

        <form id="paForm">
            <!-- Basic Information Card -->
            <div class="app-card">
                <div class="card-header">
                    <div class="card-icon"><i class="bi bi-info-circle-fill"></i></div>
                    <div class="card-title">Basic Information</div>
                    <div class="card-counter">1</div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="gradeSelect">Grade:</label>
                    <div class="select-wrapper">
                        <select id="gradeSelect" name="grade" class="form-control">
                            <option value="">Select Grade</option>
                            <option value="1">Grade 1</option>
                            <option value="2">Grade 2</option>
                            <option value="3">Grade 3</option>
                            <option value="4">Grade 4</option>
                            <option value="5">Grade 5</option>
                            <option value="6">Grade 6</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="unitName">Unit Name:</label>
                    <input type="text" id="unitName" name="unitName" class="form-control" placeholder="Enter unit name">
                    <div class="form-help">Please enter the name of the teaching unit for this assessment task</div>
                </div>
            </div>

            <!-- Learning Goals Card -->
            <div class="app-card">
                <div class="card-header">
                    <div class="card-icon"><i class="bi bi-target"></i></div>
                    <div class="card-title">Learning Goals & Standards</div>
                    <div class="card-counter">2</div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="learningObjectives">Learning Objectives/Standards:</label>
                    <textarea id="learningObjectives" name="learningObjectives" class="form-control" placeholder="Enter learning objectives/standards"></textarea>
                    <div class="form-help">You can select from the standards library or manually enter custom learning objectives</div>

                    <div class="standards-selector">
                        <div class="select-wrapper">
                            <select id="gradeSelectStandards" class="form-control">
                                <option value="">Select Grade</option>
                                <option value="1">Grade 1</option>
                                <option value="2">Grade 2</option>
                                <option value="3">Grade 3</option>
                                <option value="4">Grade 4</option>
                                <option value="5">Grade 5</option>
                                <option value="6">Grade 6</option>
                                <option value="7">Grade 7</option>
                            </select>
                        </div>
                        <div class="select-wrapper">
                            <select id="subjectSelectStandards" class="form-control">
                                <option value="">Select Subject</option>
                                <option value="English">English</option>
                                <option value="PE">Physical Education</option>
                                <option value="Music">Music</option>
                            </select>
                        </div>
                        <div class="select-wrapper">
                            <select id="standardsSelect" class="form-control">
                                <option value="">Select Standard</option>
                            </select>
                        </div>
                    </div>

                    <button type="button" id="aiEditButton1" class="btn-ai" data-target="learningObjectives">
                        <i class="bi bi-magic"></i> AI Optimize Learning Objectives
                    </button>
                    <span id="aiEditSpinner1" class="ai-progress" style="display:none;">
                        <span class="spinner"></span> Optimizing...
                    </span>
                    <textarea id="learningObjectivesAiSuggestion" name="learningObjectivesAiSuggestion" class="form-control mt-2" rows="5" style="display: none;"></textarea>
                    <button type="button" id="applyLearningObjectives" class="btn btn-success mt-2" style="display: none;">Apply</button>
                </div>

                <div class="form-group">
                    <label class="form-label" for="essentialQuestions">Essential Questions:</label>
                    <textarea id="essentialQuestions" name="essentialQuestions" class="form-control" placeholder="Enter essential questions"></textarea>
                    <div class="form-help">Good essential questions guide student thinking and demonstrate understanding</div>
                    
                    <button type="button" id="aiEditButton2" class="btn-ai" data-target="essentialQuestions">
                        <i class="bi bi-magic"></i> AI Optimize Essential Questions
                    </button>
                    <span id="aiEditSpinner2" class="ai-progress" style="display:none;">
                        <span class="spinner"></span> Optimizing...
                    </span>
                    <textarea id="essentialQuestionsAiSuggestion" name="essentialQuestionsAiSuggestion" class="form-control mt-2" rows="3" style="display: none;"></textarea>
                    <button type="button" id="applyEssentialQuestions" class="btn btn-success mt-2" style="display: none;">Apply</button>
                </div>
            </div>

            <!-- Assessment Design Card -->
            <div class="app-card">
                <div class="card-header">
                    <div class="card-icon"><i class="bi bi-clipboard-check"></i></div>
                    <div class="card-title">Assessment Design</div>
                    <div class="card-counter">3</div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="backgrounds">Background (Authentic Context):</label>
                    <textarea id="backgrounds" name="backgrounds" class="form-control" placeholder="Enter assessment background/authentic context"></textarea>
                    <div class="form-help">Describe the authentic context in which students will demonstrate their abilities</div>
                    
                    <button type="button" id="aiEditButton3" class="btn-ai" data-target="backgrounds">
                        <i class="bi bi-magic"></i> AI Optimize Background Description
                    </button>
                    <span id="aiEditSpinner3" class="ai-progress" style="display:none;">
                        <span class="spinner"></span> Optimizing...
                    </span>
                    <textarea id="backgroundsAiSuggestion" name="backgroundsAiSuggestion" class="form-control mt-2" rows="3" style="display: none;"></textarea>
                    <button type="button" id="applyBackgrounds" class="btn btn-success mt-2" style="display: none;">Apply</button>
                </div>

                <div class="form-group">
                    <label class="form-label" for="paDescription">Assessment Task Description:</label>
                    <textarea id="paDescription" name="paDescription" class="form-control" placeholder="Enter detailed assessment task description"></textarea>
                    <div class="form-help">Detail the content and requirements of the task students need to complete</div>
                    
                    <button type="button" id="aiEditButton4" class="btn-ai" data-target="paDescription">
                        <i class="bi bi-magic"></i> AI Optimize Task Description
                    </button>
                    <span id="aiEditSpinner4" class="ai-progress" style="display:none;">
                        <span class="spinner"></span> Optimizing...
                    </span>
                    <textarea id="paDescriptionAiSuggestion" name="paDescriptionAiSuggestion" class="form-control mt-2" rows="5" style="display: none;"></textarea>
                    <button type="button" id="applyPaDescription" class="btn btn-success mt-2" style="display: none;">Apply</button>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="imageUpload">Upload Image:</label>
                    <div class="upload-container">
                        <label for="imageUpload" class="upload-btn">
                            <i class="bi bi-upload"></i> Choose File
                        </label>
                        <input type="file" id="imageUpload" accept="image/png" style="display: none;">
                        <span class="upload-text" id="file-selected">No file chosen</span>
                    </div>
                    <div class="form-help">Upload images or examples related to the assessment task</div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="artifactsEvidence">Artifacts/Evidence:</label>
                    <textarea id="artifactsEvidence" name="artifactsEvidence" class="form-control" placeholder="Enter student deliverables, final products, or evidence"></textarea>
                    <div class="form-help">List the artifacts or evidence that students need to submit</div>
                    
                    <button type="button" id="aiEditButton5" class="btn-ai" data-target="artifactsEvidence">
                        <i class="bi bi-magic"></i> AI Optimize Artifact Requirements
                    </button>
                    <span id="aiEditSpinner5" class="ai-progress" style="display:none;">
                        <span class="spinner"></span> Optimizing...
                    </span>
                    <textarea id="artifactsEvidenceAiSuggestion" name="artifactsEvidenceAiSuggestion" class="form-control mt-2" rows="5" style="display: none;"></textarea>
                    <button type="button" id="applyArtifactsEvidence" class="btn btn-success mt-2" style="display: none;">Apply</button>
                </div>
            </div>

            <!-- Competency Indicators Card -->
            <div class="app-card">
                <div class="card-header">
                    <div class="card-icon"><i class="bi bi-stars"></i></div>
                    <div class="card-title">Core Competency Indicators</div>
                    <div class="card-counter">4</div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="competencySelect">Core Competency:</label>
                    <div class="select-wrapper">
                        <select id="competencySelect" name="competency" class="form-control">
                            <option value="">Select Core Competency</option>
                            <option value="1">Core Competency #1: Cultural Fluency & Global Perspective</option>
                            <option value="2">Core Competency #2: Critical Thinking & Innovation</option>
                            <option value="3">Core Competency #3: Leadership & Collaboration</option>
                            <option value="4">Core Competency #4: Emotional Resilience & Well-being</option>
                            <option value="5">Core Competency #5: Ethical Responsibility & Service</option>
                            <option value="6">Core Competency #6: Communication & Expression</option>
                        </select>
                    </div>
                    <div class="form-help">Select the core competency to be developed in this assessment task</div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="competencyIndicators">Competency Indicators:</label>
                    <div id="competencyIndicatorsContainer" class="competency-indicators">
                        <p>Please select a core competency to view related indicators</p>
                    </div>
                    <div class="form-help">Select the specific competency indicators to be assessed</div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="rubricsDisplay">Rubrics for Selected Indicators:</label>
                    <div id="rubricsContainer" class="rubrics-display">
                        <p>Select indicators to view corresponding rubrics (rubrics will be included in PDF)</p>
                    </div>
                </div>

                <div class="form-group" style="display:none;">
                    <textarea id="Rubrics"></textarea>
                </div>
            </div>

            <!-- 自定义评分标准 -->
            <div class="app-card">
                <div class="card-header">
                    <div class="card-icon"><i class="bi bi-stars"></i></div>
                    <div class="card-title">Custom Rubrics</div>
                    <div class="card-counter">5</div>
                </div>
                <div class="mb-3">
                    <button type="button" id="addIndicatorBtn" class="btn btn-primary">
                        <i class="bi bi-plus-circle"></i> Add Indicator
                    </button>
                </div>
                <div id="customRubricsContainer">
                    <!-- 指标将在这里动态添加 -->
                </div>
                <div class="form-group mt-3">
                    <button type="button" id="aiEditButton7" class="btn-ai" data-target="customRubricsContainer">
                        <i class="bi bi-magic"></i> AI Optimize Custom Rubrics
                    </button>
                    <span id="aiEditSpinner7" class="ai-progress" style="display:none;">
                        <span class="spinner"></span> Optimizing...
                    </span>
                    <textarea id="customRubricsAiSuggestion" name="customRubricsAiSuggestion" class="form-control mt-2" rows="5" style="display: none;" placeholder="AI generated suggestions for custom rubrics will appear here."></textarea>
                    <button type="button" id="applyCustomRubricsAiSuggestion" class="btn btn-success mt-2" style="display: none;">Apply Suggestion</button>
                </div>
            </div>

            <!-- Button Area -->
            <div class="btn-group">
                <button type="button" id="saveButton" class="btn btn-outline">
                    <i class="bi bi-save"></i> Save Draft
                </button>
                <button type="button" id="restartButton" class="btn btn-outline">
                    <i class="bi bi-arrow-counterclockwise"></i> Restart
                </button>
                <button type="button" id="downloadPdfButton" class="btn btn-primary">
                    <i class="bi bi-file-earmark-pdf"></i> Download PDF
                </button>
            </div>
        </form>
    </div>

    <svg class="bottom-wave" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 180">
        <path fill="#64b5f6" fill-opacity="0.5" d="M0,32L48,37.3C96,43,192,53,288,69.3C384,85,480,107,576,101.3C672,96,768,64,864,69.3C960,75,1056,117,1152,122.7C1248,128,1344,96,1392,80L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
    </svg>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-base64/3.7.2/base64.min.js"></script>
    <script src="https://lib.youware.com/youware-lib.1747145198.js" id="yourware-lib"></script>
    <script src="standards.js"></script>
    <script src="script.js"></script>
</body>
</html>